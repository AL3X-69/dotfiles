### VARIABLES
$mainMod = SUPER
$backupMod = ALT
$scripts = ~/.config/hypr/scripts
$menu = rofi -dmenu
$launcher = rofi -show drun -show-icons

$TERMINAL = kitty
$EDITOR = nvim
$EXPLORER = thunar
$BROWSER = firefox-developer-edition

### DEBUG
debug:disable_logs = false

### EXEC-ONCES
exec-once = waybar
#exec-once = elephant
#exec-once = walker --gapplication-service
exec-once = wpaperd
exec-once = wl-paste --watch cliphist store
exec-once = hypridle
exec-once = thunar --daemon
exec-once = nm-applet

### DISPLAY
# Import config
source = monitors.conf

### KEYBINDS
# Window Management
bind = $mainMod, Q, exec, $scripts/dontkillsteam.sh
bind = Alt, F4, exec, $scripts/dontkillsteam.sh
bind = $mainMod, Delete, exit
bind = $backupMod, W, togglefloating
bind = $mainMod, G, togglegroup
bind = Shift, F11, fullscreen
bind = $mainMod, L, exec, lockscreen.sh
bind = $mainMod Shift, F, exec, $scripts/windowpin.sh

# Window Movement / Resizing
$moveactivewindow=grep -q "true" <<< $(hyprctl activewindow -j | jq -r .floating) && hyprctl dispatch moveactive
binde = $mainMod Shift Control, left, exec, $moveactivewindow -30 0 || hyprctl dispatch movewindow l
binde = $mainMod Shift Control, right, exec, $moveactivewindow 30 0 || hyprctl dispatch movewindow r
binde = $mainMod Shift Control, up, exec, $moveactivewindow  0 -30 || hyprctl dispatch movewindow u
binde = $mainMod Shift Control, down, exec, $moveactivewindow 0 30 || hyprctl dispatch movewindow d
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow
bindm = $mainMod, Z, movewindow
bindm = $mainMod, X, resizewindow

# Workspaces
bind = $mainMod Control, Right, workspace, r+1
bind = $mainMod Control, Left, workspace, r-1
bind = $mainMod Control, Down, workspace, empty
bind = $mainMod Control+Alt, Right, movetoworkspace, r+1
bind = $mainMod Control+Alt, Left, movetoworkspace, r-1
bind = $mainMod, mouse_down, workspace, e+1
bind = $mainMod, mouse_up, workspace, e-1
bind = $backupMod Shift, S, movetoworkspace, special
#bind = $backupMod Alt, S, movetoworkspacesilent, special
bind = $backupMod, S, togglespecialworkspace
#bind = $mainMod, S, exec, hyprctl dispatch togglespecialworkspace
#bind = $mainMod, S, exec, notify-send "Pressed SUPER+S"

# Quick launch
bind = $mainMod, T, exec, $TERMINAL
bind = $mainMod, B, exec, $BROWSER
bind = $mainMod, E, exec, $EXPLORER
bind = $mainMod, C, exec, $TERMINAL -e $EDITOR

# Laucher (wofi)
bind = $mainMod, A, exec, $launcher
bind = $mainMod, semicolon, exec, flatpak run it.mijorus.smile 

# Hardware Control : Audio
bindl  = , XF86AudioMute, exec, pamixer -t
bindl  = , XF86AudioMicMute, exec, pamixer --default-source -t
bindel = , XF86AudioLowerVolume, exec, $scripts/volume.sh d
bindel = , XF86AudioRaiseVolume, exec, $scripts/volume.sh u

# Hardware Control : Media
bindl  = , XF86AudioPlay, exec, playerctl play-pause
bindl  = , XF86AudioPause, exec, playerctl play-pause
bindl  = , XF86AudioNext, exec, playerctl next
bindl  = , XF86AudioPrev, exec, playerctl previous

# Hardware Control : Display
bindel = , XF86MonBrightnessUp, exec, $scripts/brightness.sh u
bindel = , XF86MonBrightnessDown, exec, $scripts/brightness.sh d

# Utilities
bind = $mainMod Shift, P, exec, hyprpicker -an
bind = $mainMod, V, exec, cliphist list | $menu | cliphist decode | wl-copy
bind = $mainMod, P, exec, grimblast -n -f copy area
#TODO: Screenshots

# Wallpaper
bind = $mainMod Alt, left, exec, wpaperctl previous
bind = $mainMod Alt, right, exec, wpaperctl next

### WINDOW RULES
# Opacity
windowrule = opacity 0.80 override 0.80 override 1,class:^(kitty)$

# idleinhibit rules
windowrule = idleinhibit fullscreen, class:^(.*celluloid.*)$|^(.*mpv.*)$|^(.*vlc.*)$
windowrule = idleinhibit fullscreen, class:^(.*[Ss]potify.*)$
windowrule = idleinhibit fullscreen, class:^(.*LibreWolf.*)$|^(.*floorp.*)$|^(.*brave-browser.*)$|^(.*firefox.*)$|^(.*chromium.*)$|^(.*zen.*)$|^(.*vivaldi.*)$

# Pop-up
windowrulev2 = nofocus, title:^(win\d+)$, class:^(jetbrains-.*)$
windowrulev2 = float, title:^(win\d+)$, class:^(jetbrains-.*)$
windowrulev2 = float, class:^(jetbrains-.*), title:^(win.*)
windowrulev2 = noinitialfocus, class:^(jetbrains-.*) 
windowrule = float, title:^(Opération.*)$, class:^(thunar)$
windowrule = float, class:^(it.mijorus.smile)$
windowrule = move onscreen cursor, class:^(it.mijorus.smile)$

# Picture-in-Picture
windowrule = float, title:^((?:[Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)|(?:[Ii]ncrustation\s[vV]idéo))(.*)$
windowrule = keepaspectratio, title:^((?:[Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)|(?:[Ii]ncrustation\s[vV]idéo))(.*)$
windowrule = move 73% 72%, title:^((?:[Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)|(?:[Ii]ncrustation\s[vV]idéo))(.*)$ 
windowrule = size 25%, title:^((?:[Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)|(?:[Ii]ncrustation\s[vV]idéo))(.*)$
windowrule = float, title:^((?:[Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)|(?:[Ii]ncrustation\s[vV]idéo))(.*)$
windowrule = pin, title:^((?:[Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)|(?:[Ii]ncrustation\s[vV]idéo))(.*)$


### INPUT
input {
    kb_layout=fr,us
    kb_options=grp:win_space_toggle
    numlock_by_default=true
    
    touchpad {
        natural_scroll=yes
	disable_while_typing=no
    }
}
